function Standard(t){Beatmap.call(this,t);let i=window.localStorage.getItem("DefaultColor");this.useDefaultColor=i?parseInt(i):0;let e=window.localStorage.getItem("ColorChange");this.colorChange=e?parseInt(e):0,this.Colors.length&&!this.useDefaultColor?this.Colors.push(this.Colors.shift()):this.Colors=Standard.DEFAULT_COLORS;for(var a=1,s=-1,r=1,o=0;o<this.HitObjects.length;o++){(n=this.HitObjects[o])instanceof Spinner?r=1:(n.newCombo||r)&&(a=1,s=(s+1+n.comboSkip)%this.Colors.length,r=0),n.combo=a++,n.color=this.colorChange?this.Colors[o%this.Colors.length]:this.Colors[s]}for(o=this.HitObjects.length-1;o>0;o--){var n;if(!(0!=(n=this.HitObjects[o]).stack||n instanceof Spinner))for(var c=o-1;c>=0;c--){var h=this.HitObjects[c];if(!(h instanceof Spinner)){if(n.time-h.endTime>this.approachTime*this.StackLeniency)break;if(n.position.distanceTo(h.endPosition)<Standard.STACK_LENIENCE){if(h instanceof Slider){for(var l=n.stack-h.stack+1,d=c+1;d<=o;d++){var p=this.HitObjects[d];p.position.distanceTo(h.endPosition)<Standard.STACK_LENIENCE&&(p.stack-=l)}break}h.stack=n.stack+1,n=h}}}}this.circleRadius=this.circleDiameter/2,this.circleBorder=this.circleRadius/8,this.shadowBlur=this.circleRadius/15}Standard.prototype=Object.create(Beatmap.prototype,{approachTime:{get:function(){return this.ApproachRate<5?1800-120*this.ApproachRate:1200-150*(this.ApproachRate-5)}},circleDiameter:{get:function(){return 108.848-8.9646*this.CircleSize}},stackOffset:{get:function(){return this.circleDiameter/20}}}),Standard.prototype.constructor=Standard,Standard.prototype.hitObjectTypes={},Standard.ID=0,Beatmap.modes[Standard.ID]=Standard,Standard.DEFAULT_COLORS=["rgb(0,202,0)","rgb(18,124,255)","rgb(242,24,57)","rgb(255,292,0)"],Standard.STACK_LENIENCE=3,Standard.prototype.update=function(t){t.shadowColor="#666",t.lineCap="round",t.lineJoin="round";try{t.font=this.circleRadius+'px "Comic Sans MS", cursive, sans-serif'}catch(t){}t.textAlign="center",t.textBaseline="middle",t.translate((Beatmap.WIDTH-Beatmap.MAX_X)/2,(Beatmap.HEIGHT-Beatmap.MAX_Y)/2)},Standard.prototype.draw=function(t,i){for(void 0===this.tmp.first&&(this.tmp.first=0,this.tmp.last=-1);this.tmp.first<this.HitObjects.length;){if(t<=(a=this.HitObjects[this.tmp.first]).endTime+a.__proto__.constructor.FADE_OUT_TIME)break;this.tmp.first++}for(;this.tmp.last+1<this.HitObjects.length&&t>=this.HitObjects[this.tmp.last+1].time-this.approachTime;)this.tmp.last++;for(var e=this.tmp.last;e>=this.tmp.first;e--){var a;t>(a=this.HitObjects[e]).endTime+a.__proto__.constructor.FADE_OUT_TIME||a.draw(t,i)}Standard.prototype.processBG=function(t){"1"===window.localStorage.getItem("BGChange")&&(t.fillStyle="rgba(0, 0, 0, 1.0)",t.fillRect(0,0,t.canvas.width,t.canvas.height))}};
