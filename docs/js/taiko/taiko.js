function Taiko(t){Scroll.call(this,t);for(var i=0;i<this.HitObjects.length;i++){var e=this.HitObjects[i];e.position.x=this.scrollAt(e.time),e.endPosition.x=this.scrollAt(e.endTime)}}Taiko.prototype=Object.create(Scroll.prototype,{}),Taiko.prototype.constructor=Taiko,Taiko.prototype.hitObjectTypes={},Taiko.ID=1,Beatmap.modes[Taiko.ID]=Taiko,Taiko.DEFAULT_COLORS=["#eb452c","#438eac","#fcb806"],Taiko.DIAMETER=56,Taiko.prototype.calcX=function(t,i){return 20*(t-i)*260/1e3/(8*this.SliderMultiplier)},Taiko.prototype.update=function(t){t.shadowColor="#666",t.lineCap="round",t.lineJoin="round",t.textAlign="center",t.textBaseline="middle",t.translate(160,200)},Taiko.prototype.draw=function(t,i){void 0===this.tmp.first&&(this.tmp.first=0,this.tmp.last=-1,this.tmp.barLine=0);for(var e=this.scrollAt(t);this.tmp.first<this.HitObjects.length&&t>this.HitObjects[this.tmp.first].endTime;)this.tmp.first++;for(;this.tmp.last+1<this.HitObjects.length;){var a=this.HitObjects[this.tmp.last+1];if(this.calcX(a.position.x,e)>Beatmap.WIDTH)break;this.tmp.last++}for(;this.tmp.barLine<this.barLines.length&&this.calcX(this.barLines[this.tmp.barLine],e)<-Taiko.DIAMETER;)this.tmp.barLine++;for(var s=this.tmp.barLine;s<this.barLines.length&&this.calcX(this.barLines[s],e)<Beatmap.WIDTH;s++){var o=this.calcX(this.barLines[s],e);i.beginPath(),i.moveTo(o,-Taiko.DIAMETER),i.lineTo(o,Taiko.DIAMETER),i.strokeStyle="#fff",i.lineWidth=1,i.stroke()}for(s=this.tmp.last;s>=this.tmp.first;s--){t>(a=this.HitObjects[s]).endTime||a.draw(e,i)}i.clearRect(-160,-200,2*Taiko.DIAMETER,400)},Taiko.prototype.processBG=function(t){"1"===window.localStorage.getItem("BGChange")&&(t.fillStyle="rgba(0, 0, 0, 1.0)",t.fillRect(0,0,t.canvas.width,t.canvas.height));var i=200-Taiko.DIAMETER;t.drawImage(t.canvas,0,i,t.canvas.width,t.canvas.height),t.beginPath(),t.rect(0,0,Beatmap.WIDTH,i),t.fillStyle="#000",t.fill(),t.beginPath(),t.rect(0,i,Beatmap.WIDTH,2*Taiko.DIAMETER),t.strokeStyle="#ddd",t.lineWidth=8,t.stroke(),t.fillStyle="#000",t.fill(),t.beginPath(),t.rect(0,i,2*Taiko.DIAMETER,2*Taiko.DIAMETER),t.fillStyle="#ff0080",t.fill();t.beginPath(),t.arc(160,200,Taiko.DIAMETER/2,-Math.PI,Math.PI),t.fillStyle="rgba(255,255,255,.2)",t.fill(),t.strokeStyle="rgba(255,255,255,.2)",t.lineWidth=6,t.stroke()};
